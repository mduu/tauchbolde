@using Microsoft.AspNetCore.Identity
@using Tauchbolde.Common.Domain.Avatar
@using Tauchbolde.Web.ViewComponents
@model Tauchbolde.Web.Models.ViewComponentModels.AvatarViewModel
@{
    var avatarSize = AvatarConstants.SizeMd;
    var cssClass = "img-circle";
    switch (Model.AvatarSize)
    {
        case AvatarSize.Medium:
            avatarSize = AvatarConstants.SizeMd;
            cssClass = "img-rounded";
            break;
        case AvatarSize.Small:
            avatarSize = AvatarConstants.SizeSm;
            break;
        default:
            throw new System.ArgumentOutOfRangeException();
    }
    var emailAddress = "";
    if (Model?.Diver?.User != null)
    {
        emailAddress = Model.Diver.User.Email;
    }
}
@if (!string.IsNullOrWhiteSpace(Model.Diver?.AvatarId))
{
    <img class="@cssClass"
         style="width: @(avatarSize)px; height: @(avatarSize)px;"
         src="@Url.Action("GetAvatar", "UserProfile", new { avatarId = Model.Diver.AvatarId })" />
}
else if (!string.IsNullOrWhiteSpace(emailAddress))
{
    <gravatar additional-css-classes="@cssClass"
              email-address="@emailAddress"
              image-size="@avatarSize">
    </gravatar>
}